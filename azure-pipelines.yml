trigger:
- main
- cucumber-reports

pool:
  vmImage: 'windows-latest'

steps:
  #- task: NodeTool@0
  #  inputs:
  #    versionSpec: '14.x'
  #  displayName: 'Install Node.js'

  - task: Maven@3
    displayName: 'Maven Tests'
    inputs:
      goals: 'test'
      publishJUnitResults: true
      testResultsFiles: '**/cucumber-reports/Cucumber.json' #|
      #  $(System.DefaultWorkingDirectory)/**/*.json
      #  $(System.DefaultWorkingDirectory)/**/TEST-*.xml
    continueOnError: true

  - task: PublishTestResults@2
    displayName: 'Publish Cucumber Reports'
    inputs:
      testResultsFiles: '**/cucumber-reports/Cucumber.json'
      publishRunAttachments: true
      searchFolder: '$(System.DefaultWorkingDirectory)**/cucumber-reports/*.json'
      continueOnError: true
