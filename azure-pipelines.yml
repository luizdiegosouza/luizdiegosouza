trigger:
- main
- cucumber-reports

pool:
  vmImage: 'windows-latest'

steps:
  #- task: NodeTool@0
  #  inputs:
  #    versionSpec: '14.x'
  #  displayName: 'Install Node.js'

  - task: Maven@3
    inputs:
      goals: 'test'
      publishJUnitResults: true
      testResultsFiles: |
        $(System.DefaultWorkingDirectory)/**/*.json
        $(System.DefaultWorkingDirectory)/**/TEST-*.xml
    displayName: 'Maven Tests'

  - task: PublishTestResults@2
    displayName: 'Publish Cucumber Reports'
    inputs:
      testResultsFiles: |
        $(System.DefaultWorkingDirectory)/**/*.json
      publishRunAttachments: true
      searchFolder: '$(System.DefaultWorkingDirectory)/**/*'
      condition: succeededOrFailed()
